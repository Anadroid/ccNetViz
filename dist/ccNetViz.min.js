var ca="function"==typeof Object.defineProperties?Object.defineProperty:function(v,u,k){if(k.get||k.set)throw new TypeError("ES3 does not support getters and setters.");v!=Array.prototype&&v!=Object.prototype&&(v[u]=k.value)},ea="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this;
function fa(v,u){if(u){for(var k=ea,h=v.split("."),b=0;b<h.length-1;b++){var f=h[b];f in k||(k[f]={});k=k[f]}h=h[h.length-1];b=k[h];f=u(b);f!=b&&null!=f&&ca(k,h,{configurable:!0,writable:!0,value:f})}}fa("Array.prototype.find",function(v){return v?v:function(u,k){var h;a:{h=this;h instanceof String&&(h=String(h));for(var b=h.length,f=0;f<b;f++){var d=h[f];if(u.call(k,d,f,h)){h=d;break a}}h=void 0}return h}});fa("Number.EPSILON",function(){return Math.pow(2,-52)});
(function(v){function u(h){if(k[h])return k[h].f;var b=k[h]={f:{},id:h,loaded:!1};v[h].call(b.f,b,b.f,u);b.loaded=!0;return b.f}var k={};u.Yc=v;u.Nc=k;u.p="";return u(0)})([function(v,u,k){function h(f,d){var a=new b(f,d),g,l=[],n={},h,p;f.addEventListener("contextmenu",h=function(c){0<l.length&&(n=l.pop(),a.set(n.a,n.i),a.F());c.preventDefault()});f.addEventListener("click",p=function(c){var e=f.getBoundingClientRect();c=a.mc({La:5,x:c.clientX-e.left,y:c.clientY-e.top});c=a.find(c.x,c.y,c.La,!0,
!1);if(0<c.a.length){var b=c.a[0].node;c=b.rc||g;b.Wb?c=void 0:b.Wb=!0;b.a&&b.i&&(e=b.a,b=b.i,l.push(n),n={a:e,i:b},a.set(n.a,n.i,c),a.F())}});this.remove=function(){f.removeEventListener("contextmenu",h);f.removeEventListener("click",p);a.remove()};this.set=function(c,b,d){n={a:c,i:b};l=[];g=d;a.set.apply(a,arguments)};var k=this;"find findArea getLayerCoords draw resetView setViewport update resetView".split(" ").forEach(function(c){(function(c,b){b[c]=function(){return a[c].apply(a,arguments)}})(c,
k)})}var b=k(1);window.Pc=h;v.f=h},function(v,u,k){function h(c,e){function A(c,b){if(!D()){var e=B.ca[c].apply(B.ca,b);if(!B.w)return e;var a=B.w[c].apply(B.w,b),d={},q;for(q in e)d[q]=f(e[q],a[q],function(c,b){return c.N-b.N});return d}}function C(c){return h(c,P(),.4)}function h(c,b,e){b=e*Math.sqrt(c.width*c.height/b)/y.size;if(c=c.style)b=c.ka?Math.min(c.ka,b):b,b=b<c.Vc?0:c.da?Math.max(c.da,b):b;return b}function D(){return M?(console.error("Cannot call any function on graph after remove()"),
!0):!1}function E(){B.w||(B.w=new d(c,F,y,w,S,G,e,m,r,h,C,P,T,da,t))}function k(){U||(U=new p(B,E,L,K,V,b));return U}function J(){var c=!1;if(Q)for(var b in y)Q[b]!==y[b]&&(c=!0);l.extend(Q,y);c&&e.yc&&e.yc(y)}var z=this,u=this,v=e.m.background=e.m.background||{},v=new g(v.color||"rgb(255, 255, 255)"),M=!1,x=!1,m=e.m.node=e.m.node||{};m.da=null!=m.da?m.da:6;m.ka=m.ka||16;m.color=m.color||"rgb(255, 255, 255)";if(m.label){var q=m.label;q.color=q.color||"rgb(120, 120, 120)";q.font=q.font||"11px Arial, Helvetica, sans-serif"}var r=
e.m.$a=e.m.$a||{};r.width=r.width||1;r.color=r.color||"rgb(204, 204, 204)";var t=e.fb||function(){!M&&x&&z.F()};r.ba&&(q=r.ba,q.da=null!=q.da?q.da:6,q.ka=q.ka||12,q.S=1);var B={},y=void 0,w=void 0,L=void 0,F={};this.Ua=function(){var c=0,b;for(b in B)c+=B[b].Ua();return c};var P=e.Tc||this.Ua;this.Ta=function(){var c=0,b;for(b in B)c+=B[b].Ta();return c};var T=e.Sc||this.Ta,da=l.Cb(function(){u.F.call(u);return!1},5),K=void 0,V=void 0,U=void 0;this.set=function(c,e,a){if(D())return z;K=c||[];V=e||
[];K.forEach(b);V.forEach(b);B.w&&B.w.set([],[],a);B.ca.set(K,V,a);U=void 0;x=!0;return z};this.removeNode=function(c){if(D())return z;k().removeNode(c);return z};this.Rb=function(c){D()||k().Rb(c)};this.vb=function(c){D()||k().vb(c)};this.wb=function(c){D()||k().wb(c)};this.Vb=function(c){if(D())return z;z.removeNode(c);z.wb(c);return z};this.Ub=function(c){if(D())return z;z.Rb(c);z.vb(c);return z};this.jc=function(){D()||k().jc()};var Z=.5*m.ka;this.F=function(){if(!D()){var b=c.width,e=c.height,
d=b/e,q=1===y.size?Z:0,r=q/b,q=q/e;F.transform=a.$c(y.x-r,y.x+y.size+r,y.y-q,y.y+y.size+q,-1,1);F.offsetX=r;F.offsetY=q;F.width=.5*b;F.height=.5*e;F.D=d*d;F.S=d;F.count=P();F.style&&delete F.style;F.M=h(F,T(),.5);F.style=m;F.O=C(F);w.viewport(0,0,b,e);w.clear(w.COLOR_BUFFER_BIT);for(b=0;b<B.ca.gb.elements.length;b++)B.ca.gb.elements[b].F(F),B.w&&B.w.gb.elements[b].F(F)}};L=this.F.bind(this);this.mc=function(b){if(!D()){var e={};["x","x1","x2"].forEach(function(a){if(void 0!==b[a]){var d=b[a],d=d/
c.width*(y.size+2*F.offsetX)-F.offsetX+y.x;e[a]=d}});["y","y1","y2"].forEach(function(a){if(void 0!==b[a]){var d=b[a],d=(1-d/c.height)*(y.size+2*F.offsetY)-F.offsetY+y.y;e[a]=d}});if(void 0!==b.La){var a=b.La,a=Math.max(a/c.height,a/c.width)*y.size;e.La=a}return e}};this.find=function(){return A("find",arguments)};this.Db=function(){return A("findArea",arguments)};var Y=void 0,R=void 0;c.addEventListener("mousedown",Y=function(b){function a(c){if(f)x?w.Za&&w.Za(c):(y.x=Math.max(0,Math.min(1-y.size,
g-c.clientX/q)),y.y=Math.max(0,Math.min(1-y.size,c.clientY/m-l)),J(),d.F());else{var b=c.clientX-r,e=c.clientY-t;8<b*b+e*e&&(f=!0,(x=w&&w.start({clientX:r,clientY:t}))&&w.Za&&w.Za(c))}c.preventDefault()}var d=this,q=c.width/y.size,m=c.height/y.size,r=b.clientX,t=b.clientY,g=y.x+r/q,l=t/m-y.y,w=e.Zc,f=void 0,x=void 0;window.addEventListener("mouseup",function ha(c){x&&w.stop&&w.stop(c);!f&&e.zc&&e.zc(c);window.removeEventListener("mouseup",ha);window.removeEventListener("mousemove",a)});window.addEventListener("mousemove",
a)}.bind(this));c.addEventListener("wheel",R=function(b){var a=c.getBoundingClientRect(),d=Math.min(1,y.size*(1+.001*(b.deltaMode?33:1)*b.deltaY)),q=d-y.size;b.preventDefault();var m=y.size,r=y.x,t=y.y;y.size=d;y.x=Math.max(0,Math.min(1-d,y.x-q*(b.clientX-a.left)/c.width));y.y=Math.max(0,Math.min(1-d,y.y-q*(1-(b.clientY-a.top)/c.height)));e.Ac&&!1===e.Ac(y)?(y.size=m,y.x=r,y.y=t):(J(),this.F())}.bind(this));this.remove=function(){if(!D()){w.viewport(0,0,2*F.width,2*F.height);w.clear(w.COLOR_BUFFER_BIT);
var b=w.getExtension("WEBGL_lose_context");b&&b.loseContext();c.removeEventListener("mousedown",Y);c.removeEventListener("wheel",R);M=!0}};var Q={};this.Hb=function(){if(!D())return c.toDataURL()};this.resize=function(){D()||(c.width=c.offsetWidth,c.height=c.offsetHeight)};["update"].forEach(function(c){(function(c,b){b[c]=function(){var e=arguments,a;for(a in B){var d=B[a];d[c].apply(d,e)}return b}})(c,u)});w=function(){var b={depth:!1,antialias:!1};return c.getContext("webgl",b)||c.getContext("experimental-webgl",
b)}();w.clearColor(v.r,v.W,v.T,v.ra);w.blendEquation(w.FUNC_ADD);w.blendFuncSeparate(w.SRC_ALPHA,w.ONE_MINUS_SRC_ALPHA,w.ONE,w.ONE);w.enable(w.BLEND);y={size:1,x:0,y:0};this.resize();var S=new n(t),G=new I(t);B.ca=new d(c,F,y,w,S,G,e,m,r,h,C,P,T,da,t)}function b(c){void 0!==c.Aa?(c.b=c.Aa,delete c.Aa):void 0===c.b&&(c.b=++z)}function f(c,b,a){var e=[];e.length=c.length+b.length;for(var d=0,g=0,l=0;d<c.length&&g<b.length;)0>a(c[d],b[g])?e[l++]=c[d++]:e[l++]=b[g++];for(;d<c.length;)e[l++]=c[d++];for(;g<
b.length;)e[l++]=b[g++];return e}var d=k(2);u=k(8);var a=k(4),g=k(3),l=k(7),n=k(18),I=k(19),p=k(20);k=k(16);var z=0;h.color=g;h.dd=k;h.rc=u;h.color=g;window.Oc=h;v.f=h},function(v,u,k){k(3);var h=k(4),b=k(5),f=k(8),d=k(12),a=k(13);k(7);var g=k(16);v.f=function(l,n,k,p,z,c,e,A,C,N,D,E,H,J,u){function I(c){void 0!==c&&(c=R[c]);if(void 0===c||"number"!==typeof c)c=0;return c}function v(c,a,e,q,m,r){var t=a.x,g=a.y,w,l,y,f;d.bb(a.e,L);w=L.x;l=L.y;y=L.U;f=L.V;a=a.Kb?0:1;c.Xa&&b.g(c.Xa,e,-l,w,-l,w,-l,w,
-l,w);c.Sa&&b.g(c.Sa,e,-f,y,-f,y,-f,y,-f,y);b.cd(c.xc,e,a,a,a,a);b.g(c.position,e,t,g,t,g,t,g,t,g);b.g(c.direction,e,m,r,m,r,m,r,m,r);b.g(c.Tb,e,0,0,1,0,1,1,0,1);b.Ka(c.l,e,q)}function M(c,a,e,q){var m,r,t,g,l,f;d.bb(q.e,y);q=y.x;r=y.y;l=y.U;f=y.V;d.bb(e.e,w);e=w.x;m=w.y;t=w.U;g=w.V;c.Xa&&b.g(c.Xa,a,-m,e,-m,e,-r,q,-r,q);c.Sa&&b.g(c.Sa,a,-g,t,-g,t,-f,l,-f,l)}function x(c,b){var a=b.x-c.x,e=b.y-c.y,d=1/Math.sqrt(a*a+e*e);return{x:d*a,y:d*e}}function m(a){return function(a){var e=S.Eb(a.font);e.Ec(a.font,
c,z);return{set:function(c,a,d,q){for(var m=a.x,r=a.y,t=e.get(a.label||"",m,r),g=0;g<t.length;g++,d+=4,q+=6){var l=t[g],w=l.yb;if(c.color){var f=a.color;b.Ab(c.color,d,f,f,f,f)}b.g(c.position,d,m,r,m,r,m,r,m,r);b.g(c.ad,d,l.sa,l.ta,w.width+l.sa,l.ta,w.width+l.sa,w.height+l.ta,l.sa,w.height+l.ta);b.g(c.Tb,d,w.left,w.bottom,w.right,w.bottom,w.right,w.top,w.left,w.top);b.Ka(c.l,d,q)}},size:function(c,b){return e.ed(b.label||"")}}}(a)}function q(){return{set:function(c,a,e,d){var q=a.x,m=a.y;b.g(c.position,
e,q,m,q,m,q,m,q,m);b.g(c.Tb,e,0,0,1,0,1,1,0,1);c.color&&(a=a.color,b.Ab(c.color,e,a,a,a,a));b.Ka(c.l,e,d)}}}var r=this;H=H||function(){return r.i.length};e=e||{};e.m=e.m||{};var t=Math.cos(.9),B=Math.sin(.9),y={},w={},L={},F={lines:function(){return{set:function(c,a,e,q){var m=d.u(a);a=d.B(a);var r=m.x-a.x,t=m.y-a.y,g=x(m,a);M(c,e,m,a);b.g(c.position,e,m.x,m.y,m.x,m.y,a.x,a.y,a.x,a.y);b.g(c.Lb,e,0,0,0,0,r,t,r,t);b.g(c.Qb,e,-g.y,g.x,g.y,-g.x,g.y,-g.x,-g.y,g.x);b.Ka(c.l,e,q)}}},curves:function(){return{o:3,
G:3,set:function(c,a,e,q){var m=d.u(a);a=d.B(a);var r=m.x-a.x,t=m.y-a.y,g=x(m,a);M(c,e,m,a);b.g(c.position,e,m.x,m.y,.5*(a.x+m.x),.5*(a.y+m.y),a.x,a.y);b.g(c.Lb,e,0,0,r/2,t/2,r,t);b.g(c.Qb,e,0,0,g.y,-g.x,0,0);b.g(c.curve,e,1,1,.5,0,0,0);b.l(c.l,e,q,0,1,2)}}},circles:function(){return{set:function(c,a,e,q){a=d.u(a);var m=.5>a.y?1:-1,r=1.25*m,t=1.5*m;M(c,e,a,a);b.g(c.position,e,a.x,a.y,a.x,a.y,a.x,a.y,a.x,a.y);b.g(c.Lb,e,0,0,1,m,2,r,3,t);b.g(c.Qb,e,0,0,1,m,0,1.25*m,-1,m);b.g(c.curve,e,1,1,.5,0,0,0,
.5,0);b.Ka(c.l,e,q)}}}},P={Mb:function(){return{set:function(c,a,b,e){var q=d.u(a);a=d.B(a);q=x(q,a);v(c,a,b,e,q.x,q.y)}}},Bb:function(){return{set:function(c,a,b,e){var q=d.u(a);a=d.B(a);return v(c,a,b,e,.5*(a.x-q.x),.5*(a.y-q.y))}}},zb:function(){return{set:function(c,a,b,e){a=d.B(a);return v(c,a,b,e,.5>a.x?t:-t,.5>a.y?-B:B)}}}};this.ab=function(c){void 0===K&&(K=new g(c,[],[],[],[],x));return K};var T=void 0,O=void 0,K=void 0;this.set=function(a,b,d){function r(a,b){var e=(a.style.label||{}).font||
{},d=S.Eb(e);a.style.s=d.nc(e,c,z,b)}function t(c,a){"string"===typeof c.style.s?c.style.s=z.get(p,c.style.s,a):a()}function l(c){return c.b||-c.index||-c.vc}var w=this;U=V=0;this.a=a=a||[];this.i=b=b?[].concat(b):[];K=void 0;for(var y=[],n=[],B=[],h=0;h<b.length;h++){var L=b[h];"number"==typeof L.source&&(L.source=a[L.source]);"number"==typeof L.target&&(L.target=a[L.target])}this.ab=function(c){void 0===K&&(K=new g(c,a,y,n,B,x));return K};(function(){for(var c=0;c<a.length;c++)a[c].index=c;for(var c=
0,e=a.length+10;c<b.length;c++,e++)b[c].vc=e;T=[];O=new Uint32Array(b.length);var d={k:"_",xa:"_",d:[]},e={k:"circles",xa:"circleArrows",d:B},c={k:"lines",xa:"lineArrows",d:y},q={k:"curves",xa:"curveArrows",d:n};if(Q.OES_standard_derivatives){for(var d={},m=0;m<b.length;m++){var r=b[m],t=l(r.source),r=l(r.target);(d[t]||(d[t]={}))[r]=!0}for(m=0;m<b.length;m++){var t=b[m],r=l(t.source),g=l(t.target);r===g?(t.t=2,r=B,g=e):(g=d[g])&&g[r]?(t.t=1,r=n,g=q):(t.t=0,r=y,g=c);T.push(g);O[m]=g.d.length;r.push(t)}}else for(e=
0;e<b.length;e++)q=b[e],m=d,l(q.source)!==l(q.target)&&(m=c,q.t=0,y.push(q)),T.push(m),O[e]=m.d.length})();d&&(new f[d](a,b)).apply()&&f.normalize(a);G.a.set(p,e.m,t,a.length&&!a[0].color?a:[],q);G.wc.set(p,e.m,t,a.length&&a[0].color?a:[],q);A.label&&(S.clear(),G.labels.set(p,e.m,r,a,m));G.Ja.set(p,e.m,t,y,F.Ja);Q.OES_standard_derivatives&&(G.Ga.set(p,e.m,t,n,F.Ga),G.Fa.set(p,e.m,t,B,F.Fa));C.ba&&(G.Mb.set(p,e.m,t,y,P.Mb),Q.OES_standard_derivatives&&(G.Bb.set(p,e.m,t,n,P.Bb),G.zb.set(p,e.m,t,B,P.zb)));
(function(){function a(){b&&w.set(w.a,w.i)}var b=!1;c.fb(a);z.fb(a);b=!0})()};this.update=function(c,a,e){G[c].update(p,a,e,function(){return{set:function(c,a,e){return b.Ab(c,e,a,a,a,a)}}})};this.find=function(c,a,b,e,d){return r.ab(n).find(n,c,a,b,k.size,e,d)};this.Db=function(c,a,b,e,d,q){return r.ab(n).Db(n,c,a,b,e,k.size,d,q)};this.Vb=function(c,a){r.a[a]=c;(r.a[0].color?G.wc:G.a).Ma(p,c,a,q);G.labels.Ma(p,c,a,m);K&&K.update(n,"nodes",a,c)};this.Ub=function(c,a){var b=T[a],e=O[a];b.d[e]=r.i[a]=
c;G[b.k].Ma(p,c,e,F[b.k]);C.ba&&G[b.xa].Ma(p,c,e,P[b.xa]);K&&K.update(n,b.k,e,c)};var V=0,U=0,Z={x:-1,y:-1,title:""};this.Dc=function(c){r.a[c]!==Z&&(V++,r.Vb(Z,c))};var Y={source:{x:-1,y:-1},target:{x:-1,y:-1}};this.Cc=function(c){r.i[c]!==Y&&(U++,r.Ub(Y,c))};this.Ua=function(){return r.a.length-V};this.Ta=function(){return r.i.length-U};var R={line:0,dashed:1,"chain-dotted":2,dotted:3};this.a=[];this.i=[];var Q=h.Wc(p,"OES_standard_derivatives"),S=new a(p),G=this.gb=function(){return{elements:[],
add:function(c,a){G[c]=a;G.elements.push(a)}}}.call(this);l=["precision mediump float;","uniform vec4 color;","uniform sampler2D texture;","varying vec2 tc;","void main(void) {","   gl_FragColor = color * texture2D(texture, vec2(tc.s, tc.t));","}"];E=["precision mediump float;","uniform lowp sampler2D texture;","uniform mediump vec4 color;","uniform mediump float height_font;","uniform float type;","float u_buffer = 192.0 / 256.0;","float u_gamma = 4.0 * 1.4142 / height_font;","varying mediump vec2 tc;",
"void main() {","  if(type > 0.5){","    float tx=texture2D(texture, tc).r;","    float a= smoothstep(u_buffer - u_gamma, u_buffer + u_gamma, tx);","    gl_FragColor = color * texture2D(texture, vec2(tc.s, tc.t));","    gl_FragColor=vec4(color.rgb, a * color.a);","  }else{","    gl_FragColor = color * texture2D(texture, vec2(tc.s, tc.t));","  }","}"];var W=["#extension GL_OES_standard_derivatives : enable","#ifdef GL_ES","precision highp float;","#endif","uniform float width;","uniform vec4 color;",
"uniform float type;","uniform float lineStepSize;","uniform float lineSize;","varying vec2 c;","varying vec2 v_lengthSoFar;","void main(void) {","   float part = abs(fract(length(v_lengthSoFar)*lineStepSize*lineSize));","   if(type >= 2.5){","      part = fract(part*5.0);","      if(part < 0.5) discard;","   }else if(type >= 1.5){","      if(part < 0.15) discard;","      if(part > 0.25 && part < 0.40) discard;","   }else if(type >= 0.5){","      if(part < 0.2) discard;","   }","   vec2 px = dFdx(c);",
"   vec2 py = dFdy(c);","   float fx = 2.0 * c.x * px.x - px.y;","   float fy = 2.0 * c.y * py.x - py.y;","   float sd = (c.x * c.x - c.y) / sqrt(fx * fx + fy * fy);","   float alpha = 1.0 - abs(sd) / width;","   if (alpha < 0.0) discard;","   gl_FragColor = vec4(color.r, color.g, color.b, min(alpha, 1.0));","}"];J=["attribute vec2 curveShift;","vec4 getShiftCurve(void) {","   vec2 shiftN = vec2(curveShift.x, aspect2 * curveShift.y);","   float length = length(screen * shiftN);","   return vec4(exc * (length == 0.0 ? vec2(0, 0) : shiftN * 0.5 / length), 0, 0);",
"}","attribute vec2 circleShift;","vec4 getShiftCircle(void) {","   return vec4(size*circleShift,0,0);","}"];G.add("lines",new b(p,C,null,"precision mediump float;,attribute vec2 position;,attribute vec2 normal;,attribute vec2 lengthSoFar;,uniform float exc;,uniform vec2 size;,uniform vec2 screen;,uniform float aspect2;,uniform float aspect;,uniform vec2 width;,uniform mat4 transform;,varying vec2 n;,varying vec2 v_lengthSoFar;".split(",").concat(J).concat(["void main(void) {","   gl_Position = getShiftCurve() + getShiftCircle() + vec4(width * normal, 0, 0) + transform * vec4(position, 0, 1);",
"   vec4 p = transform*vec4(lengthSoFar,0,0);","   v_lengthSoFar = vec2(p.x, p.y/aspect);","   n = normal;","}"]),["precision mediump float;","uniform float type;","uniform vec4 color;","varying vec2 n;","varying vec2 v_lengthSoFar;","uniform float lineSize;","void main(void) {","   float part = abs(fract(length(v_lengthSoFar)*lineSize*5.0));","   if(type >= 2.5){","      part = fract(part*5.0);","      if(part < 0.5) discard;","   }else if(type >= 1.5){","      if(part < 0.15) discard;","      if(part > 0.25 && part < 0.40) discard;",
"   }else if(type >= 0.5){","      if(part < 0.2) discard;","   }","   gl_FragColor = vec4(color.r, color.g, color.b, color.a - length(n));","}"],function(c){var a=c.ga.H;a.ua&&p.uniform1f(a.ua,c.M);p.uniform2f(a.screen,c.width,c.height);var b=2.5*c.O;a.size&&p.uniform2f(a.size,b/c.width,b/c.height);p.uniform1f(a.Nb,c.width/200);p.uniform1f(a.D,c.D);p.uniform1f(a.S,c.S);p.uniform2f(a.width,c.style.width/c.width,c.style.width/c.height);p.uniform1f(a.type,I(c.style.type));h.za(p,a.color,c.style.color)}));
Q.OES_standard_derivatives&&(G.add("curves",new b(p,C,null,"precision highp float;,attribute vec2 position;,attribute vec2 normal;,attribute vec2 curve;,attribute vec2 lengthSoFar;,uniform vec2 size;,uniform float exc;,uniform vec2 screen;,uniform float aspect2;,uniform float aspect;,uniform mat4 transform;,varying vec2 v_lengthSoFar;,varying vec2 c;".split(",").concat(J).concat(["void main(void) {","   vec2 n = vec2(normal.x, aspect2 * normal.y);","   float length = length(screen * n);","   n = length == 0.0 ? vec2(0, 0) : n / length;",
"   gl_Position = getShiftCurve() + getShiftCircle() + vec4(exc * n, 0, 0) + transform * vec4(position, 0, 1);","   c = curve;","   vec4 p = transform*vec4(lengthSoFar,0,0);","   v_lengthSoFar = vec2(p.x, p.y/aspect);","}"]),W,function(c){var a=c.ga.H;p.uniform1f(a.width,c.style.width);p.uniform1f(a.ua,c.M);p.uniform2f(a.screen,c.width,c.height);var b=2.5*c.O;a.size&&p.uniform2f(a.size,b/c.width,b/c.height);p.uniform1f(a.Nb,c.width/200);p.uniform1f(a.D,c.D);p.uniform1f(a.S,c.S);p.uniform1f(a.type,
I(c.style.type));a.eb&&p.uniform1f(a.eb,5);h.za(p,a.color,c.style.color)})),G.add("circles",new b(p,C,null,"precision highp float;,attribute vec2 position;,attribute vec2 normal;,attribute vec2 curve;,attribute vec2 lengthSoFar;,uniform float exc;,uniform vec2 screen;,uniform float aspect2;,uniform float aspect;,uniform vec2 size;,uniform mat4 transform;,varying vec2 c;,varying vec2 v_lengthSoFar;".split(",").concat(J).concat(["void main(void) {","   gl_Position = getShiftCurve() + getShiftCircle() + vec4(size * normal, 0, 0) + transform * vec4(position, 0, 1);",
"   c = curve;","   vec4 p = transform*vec4(size * lengthSoFar,0,0);","   v_lengthSoFar = vec2(p.x, p.y/aspect);","}"]),W,function(c){var a=c.ga.H;a.ua&&p.uniform1f(a.ua,c.M);p.uniform1f(a.width,c.style.width);p.uniform1f(a.type,I(c.style.type));p.uniform2f(a.screen,c.width,c.height);var b=2.5*c.O;a.size&&p.uniform2f(a.size,b/c.width,b/c.height);p.uniform1f(a.Nb,c.width/200);p.uniform1f(a.D,c.D);p.uniform1f(a.S,c.S);a.eb&&p.uniform1f(a.eb,5/3);h.za(p,a.color,c.style.color)})));if(C.ba){var W={xb:{xc:1}},
aa=function(c){var a=N(c,H(),.2);if(!a)return!0;var b=c.ga.H;p.uniform1f(b.offset,.5*c.O);p.uniform2f(b.Mc,a,c.style.S*a);p.uniform1f(b.ua,c.M);b.kc&&p.uniform1f(b.kc,.5*k.size*c.M);b.size&&(a=2.5*c.O,b.size&&p.uniform2f(b.size,a/c.width,a/c.height));p.uniform2f(b.screen,c.width,c.height);p.uniform1f(b.D,c.D);h.za(p,b.color,c.style.color)};G.add("lineArrows",new b(p,C,"arrow","attribute vec2 position;,attribute vec2 direction;,attribute vec2 textureCoord;,attribute float offsetMul;,uniform float offset;,uniform vec2 arrowsize;,uniform vec2 size;,uniform vec2 screen;,uniform float exc;,uniform float aspect2;,uniform mat4 transform;,varying vec2 tc;".split(",").concat(J).concat(["void main(void) {",
"   vec2 u = direction / length(screen * direction);","   vec2 v = vec2(u.y, -aspect2 * u.x);","   v = v / length(screen * v);","   gl_Position = getShiftCurve() + getShiftCircle()  + vec4(arrowsize.x * (0.5 - textureCoord.x) * v - arrowsize.y * textureCoord.y * u - offset * offsetMul * u, 0, 0) + transform * vec4(position, 0, 1);","   tc = textureCoord;","}"]),l,aa,W));Q.OES_standard_derivatives&&(G.add("curveArrows",new b(p,C,"arrow","attribute vec2 position;,attribute vec2 direction;,attribute vec2 textureCoord;,attribute float offsetMul;,uniform float offset;,uniform vec2 arrowsize;,uniform vec2 size;,uniform float exc;,uniform float cexc;,uniform vec2 screen;,uniform float aspect2;,uniform mat4 transform;,varying vec2 tc;".split(",").concat(J).concat(["void main(void) {",
"   vec2 u = normalize(vec2(direction.y, -aspect2 * direction.x));","   u = normalize(direction - cexc * u / length(screen * u));","   u = u / length(screen * u);","   vec2 v = vec2(u.y, -aspect2 * u.x);","   v = v / length(screen * v);","   gl_Position = getShiftCurve() + getShiftCircle() + vec4(arrowsize.x * (0.5 - textureCoord.x) * v - arrowsize.y * textureCoord.y * u - offset * offsetMul * u, 0, 0) + transform * vec4(position, 0, 1);","   tc = textureCoord;","}"]),l,aa,W)),G.add("circleArrows",
new b(p,C,"arrow","attribute vec2 position;,attribute vec2 direction;,attribute vec2 textureCoord;,attribute float offsetMul;,uniform float offset;,uniform vec2 arrowsize;,uniform vec2 size;,uniform vec2 screen;,uniform float exc;,uniform float aspect2;,uniform mat4 transform;,varying vec2 tc;".split(",").concat(J).concat(["void main(void) {","   vec2 u = direction;","   vec2 v = vec2(direction.y, -direction.x);","   gl_Position = getShiftCurve() + getShiftCircle() + vec4((arrowsize.x * (0.5 - textureCoord.x) * v - arrowsize.y * textureCoord.y * u - offset * offsetMul * u) / screen, 0, 0) + transform * vec4(position, 0, 1);",
"   tc = textureCoord;","}"]),l,aa,W)))}G.add("nodes",new b(p,A,null,["attribute vec2 position;","attribute vec2 textureCoord;","uniform vec2 size;","uniform mat4 transform;","varying vec2 tc;","void main(void) {","   gl_Position = vec4(size * (textureCoord - vec2(0.5, 0.5)), 0, 0) + transform * vec4(position, 0, 1);","   tc = textureCoord;","}"],l,function(c){var a=D(c),b=c.ga.H;p.uniform2f(b.size,a/c.width,a/c.height);h.za(p,b.color,c.style.color)}));G.add("nodesColored",new b(p,A,null,["attribute vec2 position;",
"attribute vec2 textureCoord;","attribute vec4 color;","uniform vec2 size;","uniform mat4 transform;","varying vec2 tc;","varying vec4 c;","void main(void) {","   gl_Position = vec4(size * (textureCoord - vec2(0.5, 0.5)), 0, 0) + transform * vec4(position, 0, 1);","   tc = textureCoord;","   c = color;","}"],["precision mediump float;","uniform sampler2D texture;","varying vec2 tc;","varying vec4 c;","void main(void) {","   gl_FragColor = c * texture2D(texture, vec2(tc.s, tc.t));","}"],function(c){var a=
D(c);p.uniform2f(c.ga.H.size,a/c.width,a/c.height)}));A.label&&G.add("labels",new b(p,A,"label",["attribute vec2 position;","attribute vec2 relative;","attribute vec2 textureCoord;","uniform float offset;","uniform vec2 scale;","uniform float fontScale;","uniform mat4 transform;","varying vec2 tc;","void main(void) {","   gl_Position = vec4(scale * (relative*fontScale + vec2(0, (2.0 * step(position.y, 0.5) - 1.0) * offset)), 0, 0) + transform * vec4(position, 0, 1);","   tc = textureCoord;","}"],
E,function(a){if(!D(a))return!0;var b=a.style.label.font,e=a.ga.H;p.uniform1f(e.type,S.qc(b)?1:0);var d=S.Eb(b);d.Ec(b,c,z);var q=1,d=d.fontSize;(b=(b||{}).size||d)&&d&&(q=b/d);p.uniform1f(e.Rc,q);p.uniform1f(e.Uc,d);p.uniform1f(e.offset,.5*a.O);p.uniform2f(e.scale,1/a.width,1/a.height);h.za(p,e.color,a.style.color)}));if(e.fb){l=e.m;for(var ga in l)E=l[ga],E.s&&z.get(p,E.s,u),E.ba&&E.ba.s&&z.get(p,E.ba.s)}}},function(v){v.f=function k(h){if(!(this instanceof k))throw new TypeError("Cannot call a class as a function");
this.ra=1;3<=arguments.length?(this.r=arguments[0],this.W=arguments[1],this.T=arguments[2],3<arguments.length&&(this.ra=arguments[3])):/^rgba\((\d+), ?(\d+), ?(\d+), ?(\d+)\)$/i.test(h)?(h=/^rgba\((\d+), ?(\d+), ?(\d+), ?(\d+)\)$/i.exec(h),this.r=parseInt(h[1],10)/255,this.W=parseInt(h[2],10)/255,this.T=parseInt(h[3],10)/255,this.ra=parseInt(h[4],10)/255):/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(h)?(h=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(h),this.r=parseInt(h[1],10)/255,this.W=parseInt(h[2],10)/255,
this.T=parseInt(h[3],10)/255):/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(h)?(h=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(h),this.r=parseInt(h[1],10)/100,this.W=parseInt(h[2],10)/100,this.T=parseInt(h[3],10)/100):/^\#([0-9a-f]{6})$/i.test(h)?(h=parseInt(h.substring(1),16),this.r=(h>>16&255)/255,this.W=(h>>8&255)/255,this.T=(h&255)/255):this.r=this.W=this.T=0}},function(v){var u=function(){function h(b,f){for(var d=0;d<f.length;d++){var a=f[d];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in
a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(b,f,d){f&&h(b.prototype,f);d&&h(b,d);return b}}(),k=function(){function h(){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");}u(h,null,[{key:"initExtensions",value:function(b){for(var f=b.getSupportedExtensions(),d={},a=1;a<arguments.length;a++){var g=arguments[a];(d[g]=0<=f.indexOf(g))&&b.getExtension(g)}return d}},{key:"createShader",value:function(b,f,d){f=b.createShader(f);b.shaderSource(f,d);
b.compileShader(f);return b.getShaderParameter(f,b.COMPILE_STATUS)?f:(console.log(b.getShaderInfoLog(f)),null)}},{key:"createTexture",value:function(b,f,d,a){function g(){n.onload=null;b.bindTexture(b.TEXTURE_2D,l);(a||{}).Sb?(b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1),b.texImage2D(b.TEXTURE_2D,0,b.LUMINANCE,b.LUMINANCE,b.UNSIGNED_BYTE,n),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,
b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE)):(b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,n),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR));b.bindTexture(b.TEXTURE_2D,null);d&&d()}var l=b.createTexture(),n=new Image;n.onload=g;n.src=f;n.naturalWidth&&n.naturalHeight&&g();l.Hb=n;return l}},{key:"uniformColor",value:function(b,f,d){b.uniform4f(f,
d.r,d.W,d.T,d.ra)}},{key:"ortho",value:function(b,f,d,a,g,l){var n=1/(b-f),h=1/(d-a),p=1/(g-l),k=new Float32Array(16);k[0]=-2*n;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=-2*h;k[6]=0;k[7]=0;k[8]=0;k[9]=0;k[10]=2*p;k[11]=0;k[12]=(b+f)*n;k[13]=(a+d)*h;k[14]=(l+g)*p;k[15]=1;return k}}]);return h}();v.f=k},function(v,u,k){var h=function(){function b(a,b){for(var d=0;d<b.length;d++){var g=b[d];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}return function(a,
d,l){d&&b(a.prototype,d);l&&b(a,l);return a}}(),b=k(6),f=k(3);k(7);u=function(){function d(a,g,l,n,h,p,k){function c(c,a){J=z=0;var b=Math.floor(d.sc/c.o),b=Math.min(b,a-(I-u)*b),e=b*c.G;if(!H.l||H.l.length!==e){H.l=new Uint16Array(e);var b=b*c.o,q;for(q in C.attributes)H[q]=new Float32Array(C.attributes[q].size*b)}}function e(c,a){if(c.size){var b=0;a.forEach(function(a){b+=c.size(H,a)});return b}return a.length}var A=this;if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");
var C=new b(a,n.join("\n"),h.join("\n"),k),N=[],D=[],E={},H={},J=void 0,z=void 0,u=0,I=0,M={set:function(c,a,b,e,g){for(var q=[c.l,a,b],m=0;m<g;m++)q.push(0);a=[void 0,a,b];for(b=0;b<e;b++)a.push(0);for(var t in c)"indices"===t?d.l.apply(A,q):(a[0]=c[t],d.g.apply(A,a))}};this.set=function(a,b,r,t,x){function q(c){function a(c){if(c)for(var a in c)b[a]=c[a]}var b={};a(g);a(c);l&&(a(g[l]),c&&a(c[l]));b.color=b.color&&new f(b.color);return b}function m(c){var b=N[I];if(!b){N[I]=b={};for(var e in H)b[e]=
a.createBuffer()}for(var d in C.attributes)a.bindBuffer(a.ARRAY_BUFFER,b[d]),a.bufferData(a.ARRAY_BUFFER,H[d],a.STATIC_DRAW);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,b.l);a.bufferData(a.ELEMENT_ARRAY_BUFFER,H.l,a.STATIC_DRAW);b.G=z;b.o=J;c.Ea.push(b);I++}for(var n={},B={},h=0;h<t.length;h++){var p=t[h],k=n[p.style]=n[p.style]||[];void 0===k.cb&&(k.cb=[]);k.cb.push(h);p.bd=B[p.style]=void 0===B[p.style]?0:B[p.style]+1;k.push(p)}I=u=0;A.ob=new Uint32Array(t.length);A.pb=new Uint32Array(t.length);A.nb=new Uint8Array(t.length);
A.sb=new Uint8Array(t.length);D=[];for(var M in n){u=I;t={style:q(b[M]),Ea:[],Fc:M};B=x(t.style);B.o=B.o||4;B.G=B.G||6;h=n[M];p=e(B,h);c(B,p);for(var k=d.sc,v=0;v<h.length;v++){var O=B.size?B.size(H,h[v]):1,X=J+O*B.o,ba=z+O*B.G;X>=k&&(m(t),c(B,p));B.set(H,h[v],J,z);var R=h.cb[v];A.ob[R]=z;A.pb[R]=J;A.nb[R]=I;A.sb[R]=O;z=ba;J=X}m(t);B=function(){D.push(this);E[this.Fc]=this}.bind(t);r?r(t,B):B()}};var x=void 0;this.update=function(c,a,b,e){var d=0,q=C.attributes[a].size;D.forEach(function(m){var t=
e(m.style);t.o=t.o||4;m.Ea.forEach(function(e){x&&x.length===q*e.o||(x=new Float32Array(q*e.o));for(var m=0;m<e.o;m+=(t.size?t.size(e,b[d]):1)*t.o)t.set(x,b[d++],m);c.bindBuffer(c.ARRAY_BUFFER,e[a]);c.bufferData(c.ARRAY_BUFFER,x,c.DYNAMIC_DRAW)})})};this.Ma=function(a,b,e,d){var q=E[b.style];d=d(q.style);d.o=d.o||4;d.G=d.G||6;I=u=0;var q=q.Ea[A.nb[e]],m=d.size?d.size(q,b):1,t=A.sb[e];if(m>t)console.error("Cannot set primitive to new value which has greater size ("+m+" > "+t+") - no enough empty space to fill in GL buffer");
else{c(d,t);for(d.set(H,b,0,0);m<t;m++)M.set(H,m*d.o,m*d.G,d.o,d.G);b=A.pb[e];e=A.ob[e];for(var g in C.attributes)a.bindBuffer(a.ARRAY_BUFFER,q[g]),a.bufferSubData(a.ARRAY_BUFFER,C.attributes[g].size*b*H[g].BYTES_PER_ELEMENT,H[g]);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,q.l);a.bufferSubData(a.ELEMENT_ARRAY_BUFFER,e*H.l.BYTES_PER_ELEMENT,H.l)}};this.F=function(c){c.ga=C;a.uniformMatrix4fv(C.H.transform,!1,c.transform);D.forEach(function(b){b.style.s&&(a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,
b.style.s),a.uniform1i(C.H.s,0));c.style=b.style;p(c)||b.Ea.forEach(function(c){a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c.l);for(var b in C.attributes){var e=C.attributes[b];a.bindBuffer(a.ARRAY_BUFFER,c[b]);a.vertexAttribPointer(e.index,e.size,a.FLOAT,!1,0,0)}a.drawElements(a.TRIANGLES,c.G,a.UNSIGNED_SHORT,0)})});C.fd()}}h(d,null,[{key:"vertices",value:function(a,b){for(var d=2,g=2*b,f=arguments.length;d<f;d++,g++)a[g]=arguments[d]}},{key:"singles",value:function(a,b){for(var d=2,g=1*b,f=arguments.length;d<
f;d++,g++)a[g]=arguments[d]}},{key:"colors",value:function(a,b){for(var d=2,g=4*b,f=arguments.length;d<f;d++){var h=arguments[d];a[g++]=h.r;a[g++]=h.W;a[g++]=h.T;a[g++]=h.ra}}},{key:"indices",value:function(a,b,d){for(var g=3,f=d,l=arguments.length;g<l;g++,f++)a[f]=b+arguments[g]}},{key:"quad",value:function(a,b,f){d.l(a,b,f,0,1,2,2,3,0)}},{key:"maxBufferSize",get:function(){return 65536}}]);return d}();v.f=u},function(v,u,k){var h=function(){function b(a,b){for(var d=0;d<b.length;d++){var g=b[d];
g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}return function(a,d,f){d&&b(a.prototype,d);f&&b(a,f);return a}}(),b=k(4),f={color:4};u=function(){function d(a,g,f,h){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.c=a;var l=this.Ra=a.createProgram();a.attachShader(l,b.createShader(a,a.VERTEX_SHADER,g));a.attachShader(l,b.createShader(a,a.FRAGMENT_SHADER,f));a.linkProgram(l);this.H={};g=a.getProgramParameter(l,
a.ACTIVE_UNIFORMS);for(f=0;f<g;f++){var n=a.getActiveUniform(l,f).name;this.H[n]=a.getUniformLocation(l,n)}h=(h||{}).xb||{};this.attributes={};g=a.getProgramParameter(l,a.ACTIVE_ATTRIBUTES);for(f=0;f<g;f++)n=a.getActiveAttrib(l,f).name,this.attributes[n]={index:f,size:h[n]||d.xb[n]||2}}h(d,[{key:"bind",value:function(){this.c.useProgram(this.Ra);for(var a=this.c.getProgramParameter(this.Ra,this.c.ACTIVE_ATTRIBUTES),b=0;b<a;b++)this.c.enableVertexAttribArray(b)}},{key:"unbind",value:function(){for(var a=
this.c.getProgramParameter(this.Ra,this.c.ACTIVE_ATTRIBUTES),b=0;b<a;b++)this.c.disableVertexAttribArray(b)}}],[{key:"attribute",get:function(){return f}}]);return d}();v.f=u},function(v){var u=function(){function h(b,f){for(var d=0;d<f.length;d++){var a=f[d];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(b,f,d){f&&h(b.prototype,f);d&&h(b,d);return b}}(),k=function(){function h(){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");
}u(h,null,[{key:"debounce",value:function(b,f,d){var a=this,g=arguments,l,h,k,p,z,c=function A(){var c=Date.now-p;c<f&&0<c?l=setTimeout(A,f-c):(l=null,d||(z=b.apply(k,h),l||(k=h=null)))};return function(){k=a;h=g;p=Date.now;var n=d&&!l;l||(l=setTimeout(c,f));n&&(z=b.apply(k,h),k=h=null);return z}}},{key:"extend",value:function(b){for(var f=1;f<arguments.length;f++)for(var d in arguments[f])b[d]=arguments[f][d];return b}},{key:"isObject",value:function(b){return b===Object(b)}},{key:"emptyObject",
value:function(b){if(!h.pc(b))return!1;for(var f in b)return!1;return!0}},{key:"ajax",value:function(b,f){var d;d=new XMLHttpRequest;d.onreadystatechange=function(){4==d.readyState&&200==d.status&&f(d.responseText)};d.open("GET",b,!0);d.send()}}]);return h}();v.f=k},function(v,u,k){var h=function(){function b(a,b){for(var d=0;d<b.length;d++){var g=b[d];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}return function(a,d,f){d&&b(a.prototype,
d);f&&b(a,f);return a}}(),b=k(9),f=k(11);u=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");}h(d,null,[{key:"normalize",value:function(a,b){var d,g,f=a.length;if(b)d=b.tc,g=b.uc;else{var h=-Infinity,k=-Infinity;d=g=Infinity;for(var c=0;c<f;c++){var e=a[c],h=Math.max(h,e.x),k=Math.max(k,e.y);d=Math.min(d,e.x);g=Math.min(g,e.y)}b={Ob:h,Pb:k,tc:d,uc:g}}h=d!==b.Ob?1/(b.Ob-d):(d-=.5,1);k=g!==b.Pb?1/(b.Pb-g):(g-=.5,1);for(c=0;c<f;c++)e=a[c],e.x=h*
(e.x-d),e.y=k*(e.y-g);return b}},{key:"force",get:function(){return b}},{key:"random",get:function(){return f}}]);return d}();v.f=u},function(v,u,k){var h=k(10);v.f=function(b,f){function d(c,a,b){var e=0,g=0;c.C=0;if(!c.h)for(var f=c.a,h,l=f.length,k=0;k<l;k++)h=f[k],null!=h&&(d(h,a,b),c.C+=h.C,e+=h.C*h.U,g+=h.C*h.V);c.v&&(c.h||(c.v.x+=Math.random()-.5,c.v.y+=Math.random()-.5),a*=b[c.v.index],c.C+=c.Bc=a,e+=a*c.v.x,g+=a*c.v.y);c.U=e/c.C;c.V=g/c.C}function a(c){return function(a,b,d,g){if(a.v!==c){d=
a.U-c.x;var e=a.V-c.y;b=g-b;g=d*d+e*e;if(b*b/.64<g)return Infinity>g&&(a=a.C/g,c.ea-=d*a,c.fa-=e*a),!0;a.v&&g&&Infinity>g&&(b=a.Bc/g,c.ea-=d*b,c.fa-=e*b)}return!a.C}}function g(){if(.05>(k*=.99))return k=0,!0;for(var c,e,g,C,n,D=b.length,E=f.length,H=0;H<E;H++)if(e=f[H],g=e.source,e=e.target,c=e.x-g.x,n=e.y-g.y,C=c*c+n*n)C=k*p[H]*((C=Math.sqrt(C))-u[H])/C,c*=C,n*=C,e.x-=c*(C=g.weight/(e.weight+g.weight)),e.y-=n*C,g.x+=c*(C=1-C),g.y+=n*C;if(C=.4*k)for(c=l[0]/2,n=l[1]/2,g=0;g<D;g++)e=b[g],e.x+=(c-e.x)*
C,e.y+=(n-e.y)*C;d(c=h(b),k,z);for(n=0;n<D;n++)e=b[n],!e.fixed&&c.Gc(a(e));for(c=0;c<D;c++)e=b[c],e.fixed?(e.x=e.ea,e.y=e.fa):(e.x-=.9*(e.ea-(e.ea=e.x)),e.y-=.9*(e.fa-(e.fa=e.y)))}var l=[1,1],k=void 0,u=[],p=[],z=[];this.apply=function(){for(var c=b.length,a=Math.sqrt(c),d=.3/a,h=0;h<c;h++){var l=b[h];l.weight=0;l.x=void 0!==l.x?l.x:d+h%a/a;l.y=void 0!==l.y?l.y:d+Math.floor(h/a)/a;l.ea=l.x;l.fa=l.y;z[h]=-30}for(c=0;c<f.length;c++)a=f[c],a.source.weight++,a.target.weight++,u[c]=15,p[c]=1;for(k=.1;!g(););
return!0}}},function(v){v.f=function(u){function k(){return{h:!0,a:[],v:null,x:null,y:null}}function h(c,a,b,e,d,g){if(!c(a,b,e,d,g)){var f=.5*(b+d),l=.5*(e+g);a=a.a;a[0]&&h(c,a[0],b,e,f,l);a[1]&&h(c,a[1],f,e,d,l);a[2]&&h(c,a[2],b,l,f,g);a[3]&&h(c,a[3],f,l,d,g)}}function b(c,a,b,e,d,g,h,l){if(c.h){var k=c.x,n=c.y;if(null!==k){if(k!==b||n!==e){var x=c.v;c.x=c.y=c.v=null;f(c,x,k,n,d,g,h,l)}f(c,a,b,e,d,g,h,l)}else c.x=b,c.y=e,c.v=a}else f(c,a,b,e,d,g,h,l)}function f(c,a,e,d,g,f,h,l){var n=.5*(g+h),p=
.5*(f+l),x=e>=n,m=d>=p,q=m<<1|x;c.h=!1;c=c.a[q]||(c.a[q]=k());x?g=n:h=n;m?f=p:l=p;b(c,a,e,d,g,f,h,l)}function d(c,a,b,e,d,g,f){var h=Infinity,l=void 0;(function x(c,q,r,t,B){if(!(q>g||r>f||t<e||B<d)){if(point=c.v){var m=a-c.x,w=b-c.y,m=m*m+w*w;m<h&&(m=Math.sqrt(h=m),e=a-m,d=b-m,g=a+m,f=b+m,l=void 0)}for(var m=c.a,w=.5*(q+t),k=.5*(r+B),n=(b>=k)<<1|a>=w,p=n+4;n<p;++n)if(c=m[n&3])switch(n&3){case 0:x(c,q,r,w,k);break;case 1:x(c,w,r,t,k);break;case 2:x(c,q,k,w,B);break;case 3:x(c,w,k,t,B)}}})(c,e,d,g,
f);return l}for(var a=void 0,g=void 0,l=void 0,n=void 0,v=void 0,p=void 0,z=void 0,c=void 0,e=void 0,c=e=-(p=z=Infinity),g=[],l=[],v=u.length,n=0;n<v;++n)a=u[n],a.x<p&&(p=a.x),a.y<z&&(z=a.y),a.x>c&&(c=a.x),a.y>e&&(e=a.y),g.push(a.x),l.push(a.y);a=c-p;n=e-z;a>n?e=z+a:c=p+n;var A=k();A.Gc=function(a){h(a,A,p,z,c,e)};A.find=function(a,b){return d(A,a,b,p,z,c,e)};for(n=0;n<v;n++)b(A,u[n],g[n],l[n],p,z,c,e);--n;g=l=u=a=null;return A}},function(v){var u=function(){function h(b,f){for(var d=0;d<f.length;d++){var a=
f[d];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(b,f,d){f&&h(b.prototype,f);d&&h(b,d);return b}}(),k=function(){function h(b){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this.Qa=b}u(h,[{key:"apply",value:function(){for(var b=0,f=this.Qa.length;b<f;b++){var d=this.Qa[b];d.x=Math.random();d.y=Math.random()}}}]);return h}();v.f=k},function(v){var u=function(){function h(b,f){for(var d=
0;d<f.length;d++){var a=f[d];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(b,f,d){f&&h(b.prototype,f);d&&h(b,d);return b}}(),k=function(){function h(){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");}u(h,null,[{key:"edgeSource",value:function(b){if(b.source.source){var f=this.u(b.source),d=this.B(b.source);return{x:(f.x+d.x)/2,y:(f.y+d.y)/2,b:b.b,index:b.index,Kb:!0,e:b.source}}return b.source}},
{key:"edgeTarget",value:function(b){if(b.target.source){var f=this.u(b.target),d=this.B(b.target);return{x:(f.x+d.x)/2,y:(f.y+d.y)/2,b:b.b,index:b.index,Kb:!0,e:b.target}}return b.target}},{key:"getCurveShift",value:function(b,f){f=f||{};f.x=f.y=f.U=f.V=0;if(!b)return f;if(b.t&&1<=b.t)if(2<=b.t){var d=.5>this.u(b).y?1:-1;f.U=1.25*d;f.V=0}else{var d=this.u(b),a=this.B(b);f.x=d.x-a.x;f.y=d.y-a.y}return f}}]);return h}();v.f=k},function(v,u,k){var h=function(){function a(a,b){for(var d=0;d<b.length;d++){var g=
b[d];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}return function(b,d,f){d&&a(b.prototype,d);f&&a(b,f);return b}}(),b=k(14),f=k(15),d=k(7);u=function(){function a(d){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.c=d;this.oa={"default":new b(d),sdf:new f(d)}}h(a,[{key:"clear",value:function(){for(var a in this.oa)this.oa[a].clear()}},{key:"isSDF",value:function(a){return d.pc(a)&&a.hb&&a.Na?!0:
!1}},{key:"getEngine",value:function(a){return this.qc(a)?this.oa.Sb:this.oa["default"]}},{key:"bind",value:function(){for(var a in this.oa);}}]);return a}();v.f=u},function(v){var u=function(){function h(b,f){for(var d=0;d<f.length;d++){var a=f[d];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(b,f,d){f&&h(b.prototype,f);d&&h(b,d);return b}}(),k=function(){function h(b){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");
this.c=b;this.K=1024;this.P=document.createElement("canvas");this.P.width=this.P.height=this.K;this.P.style.width=this.P.style.height=this.K+"px";this.P.style.display="none";document.body.appendChild(this.P);this.X=this.P.getContext("2d");this.X.fillStyle="white";this.X.textAlign="left";this.X.textBaseline="top";this.$=this.aa=this.L=this.R=this.Y=void 0;this.s=this.c.createTexture()}u(h,[{key:"clear",value:function(){this.$={};this.X.clearRect(0,0,this.K,this.K);this.Y=this.L=this.R=0}},{key:"setFont",
value:function(b){this.$[b]=this.aa=this.$[b]||{};this.X.font=b;this.L=0;this.R+=this.Y;this.Y=+/(\d+)px/.exec(b)[1]+1}},{key:"getTexture",value:function(b,f,d,a){a();return this.s}},{key:"_getText",value:function(b){var f=this.aa[b];if(!f){var d=this.X.measureText(b).width;this.L+d>this.K&&(this.L=0,this.R+=this.Y);this.X.fillText(b,this.L,this.R);this.aa[b]=f={width:d,height:this.Y,left:this.L/this.K,right:(this.L+d)/this.K,top:this.R/this.K,bottom:(this.R+this.Y)/this.K};this.L+=d}return f}},{key:"get",
value:function(b,f,d){b=this.Jc(b);return[{yb:b,sa:.5>=f?0:-b.width,ta:.5>=d?b.height/2:-b.height}]}},{key:"steps",value:function(){return 1}},{key:"bind",value:function(){this.c.bindTexture(this.c.TEXTURE_2D,this.s);this.c.pixelStorei(this.c.UNPACK_FLIP_Y_WEBGL,!1);this.c.texParameteri(this.c.TEXTURE_2D,this.c.TEXTURE_MAG_FILTER,this.c.NEAREST);this.c.texParameteri(this.c.TEXTURE_2D,this.c.TEXTURE_MIN_FILTER,this.c.NEAREST);this.c.texImage2D(this.c.TEXTURE_2D,0,this.c.RGBA,this.c.RGBA,this.c.UNSIGNED_BYTE,
this.P);this.c.bindTexture(this.c.TEXTURE_2D,null)}},{key:"fontSize",get:function(){return this.Y}}]);return h}();v.f=k},function(v){var u=function(){function h(b,f){for(var d=0;d<f.length;d++){var a=f[d];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(b,f,d){f&&h(b.prototype,f);d&&h(b,d);return b}}(),k=function(){function h(b){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this.$={};this.aa;
this.c=b}u(h,[{key:"clear",value:function(){this.$={}}},{key:"setFont",value:function(b,f,d,a){var g=b.font;this.$[g]=this.aa=this.$[g]||{};this.s=this.nc(b,f,d,a);this.ma=f;this.ib=f.get(b.Na)}},{key:"getTexture",value:function(b,f,d,a){var g=function(){var b={};return function(d){b[d]=!0;b.Na&&b.hb&&a&&a()}}();f.load(b.Na,function(){g("SDFmetrics")},"json");return d.get(this.c,b.hb,function(){g("SDFatlas")},{Sb:!0})}},{key:"_getChar",value:function(b){var f=this.aa[b],d=this.ib;if(!d)return{};if(!f){var f=
this.s.Hb,a=d.buffer,d=d.Qc[b],g=d[0]+2*a,a=d[1]+2*a,h=d[5],k=d[6];this.aa[b]=f={wa:d[4],Gb:d[2],oc:d[3],width:g,height:a,left:h/f.width,right:(h+g)/f.width,top:k/f.height,bottom:(k+a)/f.height}}return f}},{key:"get",value:function(b,f,d){for(var a=0,g=0,h=0;h<b.length;h++)var k=this.ec(b[h]),g=Math.max(g,k.height),a=k.wa?a+(k.wa+k.Gb):a+k.width;f=.5>=f?0:-a;d=.5>=d?g/2:-g;g=[];for(a=0;a<b.length;a++){var h=this.ec(b[a]),k=void 0,u=d;if(h.wa){var p=h.Gb,z=h.oc,k=h.wa;d-=h.height-z;f+=p}g.push({yb:h,
sa:f,ta:d});d=u;f=h.wa?f+k:f+h.width}return g}},{key:"steps",value:function(b){return b.length}},{key:"bind",value:function(){}},{key:"isSDF",get:function(){return!0}},{key:"fontSize",get:function(){return(this.ib||{}).size}}]);return h}();v.f=k},function(v,u,k){function h(c,a){if(!(c instanceof a))throw new TypeError("Cannot call a class as a function");}function b(c){var a=Math.pow(Math.abs(c),1/3);return 0>c?-a:a}function f(c,e,d,q,g,f,h,l){var m;m=4*d*d-16*d*g+8*d*h+16*g*g-16*g*h+4*h*h+4*q*q-
16*q*f+8*q*l+16*f*f-16*f*l+4*l*l;var t=-12*d*d+36*d*g-12*d*h-24*g*g+12*g*h-12*q*q+36*q*f-12*q*l-24*f*f+12*f*l,r=12*d*d-24*d*g+4*d*h-4*d*c+8*g*g+8*g*c-4*h*c+12*q*q-24*q*f+4*q*l-4*q*e+8*f*f+8*f*e-4*l*e,k=-4*d*d+4*d*g+4*d*c-4*g*c-4*q*q+4*q*f+4*q*e-4*f*e;if(1E-8>Math.abs(m))if(m=t,t=r,r=k,1E-8>Math.abs(m))m=t,m=1E-8>Math.abs(m)?[]:[-r/m];else{var x=t*t-4*m*r;m=1E-8>Math.abs(x)?[-t/(2*m)]:0<x?[(-t+Math.sqrt(x))/(2*m),(-t-Math.sqrt(x))/(2*m)]:[]}else{x=(3*m*r-t*t)/(3*m*m);k=(2*t*t*t-9*m*t*r+27*m*m*k)/(27*
m*m*m);1E-8>Math.abs(x)?x=[b(-k)]:1E-8>Math.abs(k)?x=[0].concat(0>x?[Math.sqrt(-x),-Math.sqrt(-x)]:[]):(r=k*k/4+x*x*x/27,1E-8>Math.abs(r)?x=[-1.5*k/x,3*k/x]:0<r?(r=b(-k/2-Math.sqrt(r)),x=[r-x/(3*r)]):(r=2*Math.sqrt(-x/3),x=Math.acos(3*k/x/r)/3,k=2*Math.PI/3,x=[r*Math.cos(x),r*Math.cos(x-k),r*Math.cos(x-2*k)]));for(r=0;r<x.length;r++)x[r]-=t/(3*m);m=x}t=Infinity;for(x=0;x<m.length;x++)r=m[x],0>r||1<r||(r=a(c,e,d*(1-r)*(1-r)+2*g*r*(1-r)+h*r*r,q*(1-r)*(1-r)+2*f*r*(1-r)+l*r*r),r<t&&(t=r));return t}function d(c){for(var a=
Infinity,b=-a,e=Infinity,d=-e,g=0;g<c.length;g+=2){var f=c[g];f<a&&(a=f);f>b&&(b=f)}for(g=1;g<c.length;g+=2)f=c[g],f<e&&(e=f),f>d&&(d=f);return[a,e,b,d]}function a(c,a,b,e){c-=b;a-=e;return c*c+a*a}function g(c,a,b,e,d,g,f,h){var q=(b-c)*(h-g)-(e-a)*(f-d);if(0==q)return!1;f=((a-g)*(f-d)-(c-d)*(h-g))/q;c=((a-g)*(b-c)-(c-d)*(e-a))/q;return 0>f||1<f||0>c||1<c?!1:!0}function l(c,a,b,e,d,g){return c>=b-D&&c<=d+D&&a>=e-D&&a<=g+D}function n(c,a){return c>=a-D&&c<=a+D}function I(c,a,b,e,d,g){return 0>e||
1<e||!n(g-d,0)&&(c=(c*(1-e)*(1-e)+2*a*e*(1-e)+b*e*e)/(g-d),0>c||1<c)?!1:!0}function p(c,a,b,e,d,g,f,h,k,l){var m,q=-c*h+c*l+2*b*h-2*b*l-d*h+d*l+a*f-a*k-2*e*f+2*e*k+g*f-g*k;if(!n(q,0)&&!n(f-k,0)){m=2*c*h-2*c*l-2*b*h+2*b*l-2*a*k+2*e*f-2*e*k;var r=m*m-4*(-c*h+c*l+a*f-a*k-f*l+k*h)*(-c*h+c*l+2*b*h-2*b*l-d*h+d*l+a*f-a*k-2*e*f+2*e*k+g*f-g*k);if(0<=r){var t=c*h-c*l-b*h+b*l-a*f+a*k+e*f-e*k;m=(t-.5*Math.sqrt(r))/q;if(I(a,e,g,f,k,m))return!0;m=(t+.5*Math.sqrt(r))/q;if(I(a,e,g,f,k,m))return!0}}q=-b*h+b*l+d*h-
d*l+e*f-e*k-g*f+g*k;return n(a,2*e-g)&&n(c,2*b-d)&&!n(q,0)&&!n(f*h-f*l-k*h+k*l,0)&&I(a,e,g,f,k,(-2*b*h+2*b*l+d*h-d*l+2*e*f-2*e*k-g*f+g*k-f*l+k*h)/(2*q))?!0:n(h,l)&&n(a,2*e-g)&&!n(e-g,0)&&!n(f-k,0)&&I(a,e,g,f,k,(2*e-g-l)/(2*(e-g)))||n(c,(2*b*h-2*b*l-d*h+d*l+a*f-a*k-2*e*f+2*e*k+g*f-g*k)/(h-l))&&!n(b*a*h-b*a*l-2*b*e*h+2*b*e*l+b*g*h-b*g*l-d*a*h+d*a*l+2*d*e*h-2*d*e*l-d*g*h+d*g*l-a*e*f+a*e*k+a*g*f-a*g*k+2*e*e*f-2*e*e*k-3*e*g*f+3*e*g*k+g*g*f-g*g*k,0)&&!n(f-k,0)&&I(a,e,g,f,k,(2*b*h-2*b*l-d*h+d*l-2*e*f+2*
e*k+g*f-g*k+f*l-k*h)/(2*(b*h-b*l-d*h+d*l-e*f+e*k+g*f-g*k)))?!0:!1}function z(c,a,b,e,d,g,h,k,n,A){if(l(c,a,h,k,n,A)||l(d,g,h,k,n,A))return!0;var m=h-n,q=k-A,r=m*m+q*q,t=f((h+n)/2,(k+A)/2,c,a,b,e,d,g);return 4*t>r?!1:4*t<=Math.min(m*m,q*q)?!0:p(c,a,b,e,d,g,k,n,k,k)||p(c,a,b,e,d,g,n,k,n,A)||p(c,a,b,e,d,g,n,A,h,A)||p(c,a,b,e,d,g,h,A,h,k)}function c(c,a,b,e){N["default"].bb(b,e);var d;b=-e.y;d=e.x*c.D;var g=b*c.width*b*c.width+d*c.height*d*c.height;n(g,0)?d=b=0:(g=Math.sqrt(g),b*=.25*c.M*a/g,d*=.25*c.M*
a/g);g=2.5*c.O*a/c.height;c=2.5*c.O*a/c.width*-e.V*.5;a=.5*e.U*g;e.x=b+c;e.y=d+a}function e(c,a){return c.N-a.N}var A=function(){function c(c,a){for(var b=0;b<a.length;b++){var e=a[b];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(c,e.key,e)}}return function(a,b,e){b&&c(a.prototype,b);e&&c(a,e);return a}}(),C=(u=k(17))&&u.Xb?u:{"default":u},N=(k=k(12))&&k.Xb?k:{"default":k},D=Number.EPSILON||1E-14,E={},H=function(){function c(a){h(this,c);this.Jb=
!0;this.e=a}A(c,[{key:"getBBox",value:function(){return[this.e.x-D,this.e.y-D,this.e.x+D,this.e.y+D]}},{key:"intersectsRect",value:function(c,a,b,e){return l(this.e.x,this.e.y,c,a,b,e)}},{key:"dist2",value:function(c,b){return a(c,b,this.e.x,this.e.y)}}]);return c}(),J=function(){function b(c){h(this,b);this.Ia=!0;this.e=c}A(b,[{key:"getPoints",value:function(a,b){var e,d,g,f,h=N["default"].u(this.e),k=N["default"].B(this.e);e=h.x;d=h.y;g=k.x;f=k.y;c(a,b,h.e,E);e+=E.x;d+=E.y;c(a,b,k.e,E);g+=E.x;f+=
E.y;return[e,d,g,f]}},{key:"getBBox",value:function(c,a){var b=this.Fb(c,a);return[Math.min(b[0],b[2]),Math.min(b[1],b[3]),Math.max(b[0],b[2]),Math.max(b[1],b[3])]}},{key:"intersectsRect",value:function(c,a,b,e,d,f){var h=this.Fb(d,f);d=h[0];f=h[1];var k=h[2],h=h[3];return l(d,f,c,a,b,e)||l(k,h,c,a,b,e)?!0:g(d,f,k,h,c,a,b,a)||g(d,f,k,h,b,a,b,e)||g(d,f,k,h,b,e,c,e)||g(d,f,k,h,c,e,c,a)}},{key:"dist2",value:function(c,b,e,d){var g=this.Fb(e,d);d=g[0];e=g[1];var f=g[2],g=g[3],h=f-d,k=g-e,l=h*h+k*k,m=
-1;0!=l&&(m=((c-d)*h+(b-e)*k)/l);0>m||(1<m?(d=f,e=g):(d+=m*h,e+=m*k));return a(c,b,d,e)}}]);return b}(),O=function(){function a(c){h(this,a);this.Ia=!0;this.e=c}A(a,[{key:"getBezierPoints",value:function(a,b){var e,d,g;g=N["default"].u(this.e);e=g.x;d=g.y;var f=2.5*a.O*b,h=f/a.width/2,f=f/a.height/2,k=.5>g.y?1:-1;c(a,b,g.e,E);e+=E.x;d+=E.y;return[e,d,e+1*h,d+f*k,e,d+1.25*f*k,e-1*h,d+f*k]}},{key:"getBBox",value:function(c,a){var b=this.va(c,a);return d(b)}},{key:"intersectsRect",value:function(c,a,
b,e,d,g){d=this.va(d,g);return z(d[0],d[1],d[2],d[3],d[4],d[5],c,a,b,e)||z(d[2],d[3],d[4],d[5],d[6],d[7],c,a,b,e)}},{key:"dist2",value:function(c,a,b,e){e=this.va(b,e);b=f(c,a,e[0],e[1],e[2],e[3],e[4],e[5]);c=f(c,a,e[2],e[3],e[4],e[5],e[6],e[7]);return Math.min(b,c)}}]);return a}(),X=function(){function a(c){h(this,a);this.Ia=!0;this.e=c}A(a,[{key:"getBezierPoints",value:function(a,b,e){var d,g,f,h,k=N["default"].u(this.e),l=N["default"].B(this.e);d=k.x;f=k.y;g=l.x;h=l.y;var m=e(k,l);e=m.y;var m=
a.D*-m.x,q=a.width*e,n=a.height*m,q=2*Math.sqrt(q*q+n*n);e*=a.M*b/q;m*=a.M*b/q;c(a,b,k.e,E);d+=E.x;f+=E.y;c(a,b,l.e,E);g+=E.x;h+=E.y;return[d,f,(d+g)/2+e,(f+h)/2+m,g,h]}},{key:"intersectsRect",value:function(c,a,b,e,d,g,f){d=this.va(d,g,f);return z(d[0],d[1],d[2],d[3],d[4],d[5],c,a,b,e)}},{key:"getBBox",value:function(c,a,b){c=this.va(c,a,b);return d(c)}},{key:"dist2",value:function(c,a,b,e,d){b=this.va(b,e,d);return f(c,a,b[0],b[1],b[2],b[3],b[4],b[5])}}]);return a}(),ba={a:H,Ja:J,Fa:O,Ga:X};v.f=
function(){function c(a,b,e,d,g,f){h(this,c);this.normalize=f;this.ya=(0,C["default"])();this.types={a:[],Ja:[],Fa:[],Ga:[]};var k,l=[];l.length=b.length;for(k=0;k<b.length;k++){var m=new H(b[k]);l[k]=m.Ha(a,1);this.types.a.push(m);l[k].push(m)}l.length+=e.length;for(b=0;b<e.length;k++,b++)m=new J(e[b]),l[k]=m.Ha(a,1),this.types.Ja.push(m),l[k].push(m);l.length+=g.length;for(b=0;b<g.length;k++,b++)e=new O(g[b]),l[k]=e.Ha(a,1),this.types.Fa.push(e),l[k].push(e);l.length+=d.length;for(b=0;b<d.length;k++,
b++)g=new X(d[b]),l[k]=g.Ha(a,1,f),this.types.Ga.push(g),l[k].push(g);this.ya.load(l)}A(c,[{key:"findArea",value:function(c,a,b,d,g,f,h,k){if(a>d){var l=a;a=d;d=l}b>g&&(l=b,b=g,g=l);l={};k&&(l.i=[]);h&&(l.a=[]);l.a&&l.a.sort(e);l.i&&l.i.sort(e);for(var m=(a+d)/2,q=(b+g)/2,n=this.ya.search([a-D,b-D,d+D,g+D]),r=0;r<n.length;r++){var p=n[r][4],A=p.N(m,q,c,f,this.normalize);p.Xc(a,b,d,g,c,f,this.normalize)&&(p.Jb&&h&&l.a.push({node:p.e,Ya:Math.sqrt(A),N:A}),p.Ia&&k&&l.i.push({$a:p.e,Ya:Math.sqrt(A),N:A}))}return l}},
{key:"find",value:function(c,a,b,d,g,f,h){var k={};h&&(k.i=[]);f&&(k.a=[]);var l=d*d;d=this.ya.search([a-d,b-d,a+d,b+d]);for(var m=0;m<d.length;m++){var q=d[m][4],n=q.N(a,b,c,g,this.normalize);n>l||(q.Jb&&f&&k.a.push({node:q.e,Ya:Math.sqrt(n),N:n}),q.Ia&&h&&k.i.push({$a:q.e,Ya:Math.sqrt(n),N:n}))}k.a&&k.a.sort(e);k.i&&k.i.sort(e);return k}},{key:"update",value:function(c,a,b,e){this.ya.remove(this.types[a][b]);e=new ba[a](e);c=e.Ha(c,1,this.normalize);c.push(e);this.ya.Ib(this.types[a][b]=c)}}]);
return c}()},function(v){function u(c,a){if(!(this instanceof u))return new u(c,a);this.Pa=Math.max(4,c||9);this.rb=Math.max(2,Math.ceil(.4*this.Pa));a&&this.fc(a);this.clear()}function k(a,b){a.j=h(a,0,a.children.length,b)}function h(a,e,d,g){for(var c=[Infinity,Infinity,-Infinity,-Infinity],f;e<d;e++)f=a.children[e],b(c,a.h?g(f):f.j);return c}function b(a,b){a[0]=Math.min(a[0],b[0]);a[1]=Math.min(a[1],b[1]);a[2]=Math.max(a[2],b[2]);a[3]=Math.max(a[3],b[3])}function f(a,b){return a.j[0]-b.j[0]}function d(a,
b){return a.j[1]-b.j[1]}function a(a){return(a[2]-a[0])*(a[3]-a[1])}function g(a){return a[2]-a[0]+(a[3]-a[1])}function l(a,b){return a[0]<=b[0]&&a[1]<=b[1]&&b[2]<=a[2]&&b[3]<=a[3]}function n(a,b){return b[0]<=a[2]&&b[1]<=a[3]&&b[2]>=a[0]&&b[3]>=a[1]}function I(a,b,d,g,f){for(var c=[b,d],e;c.length;)d=c.pop(),b=c.pop(),d-b<=g||(e=b+Math.ceil((d-b)/g/2)*g,p(a,b,d,e,f),c.push(b,e,e,d))}function p(a,b,d,g,f){for(var c,e,h,k,l;d>b;){600<d-b&&(c=d-b+1,e=g-b+1,h=Math.log(c),k=.5*Math.exp(2*h/3),l=.5*Math.sqrt(h*
k*(c-k)/c)*(0>e-c/2?-1:1),h=Math.max(b,Math.floor(g-e*k/c+l)),e=Math.min(d,Math.floor(g+(c-e)*k/c+l)),p(a,h,e,g,f));c=a[g];e=b;k=d;z(a,b,g);for(0<f(a[d],c)&&z(a,b,d);e<k;){z(a,e,k);e++;for(k--;0>f(a[e],c);)e++;for(;0<f(a[k],c);)k--}0===f(a[b],c)?z(a,b,k):(k++,z(a,k,d));k<=g&&(b=k+1);g<=k&&(d=k-1)}}function z(a,b,d){var c=a[b];a[b]=a[d];a[d]=c}u.prototype={all:function(){return this.jb(this.data,[])},search:function(a){var b=this.data,c=[],d=this.A;if(!n(a,b.j))return c;for(var g=[],f,h,k,p;b;){f=
0;for(h=b.children.length;f<h;f++)k=b.children[f],p=b.h?d(k):k.j,n(a,p)&&(b.h?c.push(k):l(a,p)?this.jb(k,c):g.push(k));b=g.pop()}return c},load:function(a){if(!a||!a.length)return this;if(a.length<this.rb){for(var b=0,c=a.length;b<c;b++)this.Ib(a[b]);return this}a=this.lb(a.slice(),0,a.length-1,0);this.data.children.length?this.data.height===a.height?this.tb(this.data,a):(this.data.height<a.height&&(b=this.data,this.data=a,a=b),this.qb(a,this.data.height-a.height-1,!0)):this.data=a;return this},Ib:function(a){a&&
this.qb(a,this.data.height-1);return this},clear:function(){this.data={children:[],height:1,j:[Infinity,Infinity,-Infinity,-Infinity],h:!0};return this},remove:function(a){if(!a)return this;for(var b=this.data,c=this.A(a),d=[],g=[],f,h,k,n;b||d.length;){b||(b=d.pop(),h=d[d.length-1],f=g.pop(),n=!0);if(b.h&&(k=b.children.indexOf(a),-1!==k)){b.children.splice(k,1);d.push(b);this.bc(d);break}n||b.h||!l(b.j,c)?h?(f++,b=h.children[f],n=!1):b=null:(d.push(b),g.push(f),f=0,h=b,b=b.children[0])}return this},
A:function(a){return a},Va:function(a,b){return a[0]-b[0]},Wa:function(a,b){return a[1]-b[1]},toJSON:function(){return this.data},jb:function(a,b){for(var c=[];a;)a.h?b.push.apply(b,a.children):c.push.apply(c,a.children),a=c.pop();return b},lb:function(a,b,d,g){var c=d-b+1,e=this.Pa,f;if(c<=e)return f={children:a.slice(b,d+1),height:1,j:null,h:!0},k(f,this.A),f;g||(g=Math.ceil(Math.log(c)/Math.log(e)),e=Math.ceil(c/Math.pow(e,g-1)));f={children:[],height:g,j:null,h:!1};var c=Math.ceil(c/e),e=c*Math.ceil(Math.sqrt(e)),
h,l,n;for(I(a,b,d,e,this.Va);b<=d;b+=e)for(l=Math.min(b+e-1,d),I(a,b,l,c,this.Wa),h=b;h<=l;h+=c)n=Math.min(h+c-1,l),f.children.push(this.lb(a,h,n,g-1));k(f,this.A);return f},ac:function(b,d,g,f){for(var c,e,h,k,l,n,p,A;;){f.push(d);if(d.h||f.length-1===g)break;p=A=Infinity;c=0;for(e=d.children.length;c<e;c++)h=d.children[c],l=a(h.j),n=h.j,n=(Math.max(n[2],b[2])-Math.min(n[0],b[0]))*(Math.max(n[3],b[3])-Math.min(n[1],b[1]))-l,n<A?(A=n,p=l<p?l:p,k=h):n===A&&l<p&&(p=l,k=h);d=k||d.children[0]}return d},
qb:function(a,d,g){var c=this.A;g=g?a.j:c(a);var c=[],e=this.ac(g,this.data,d,c);e.children.push(a);for(b(e.j,g);0<=d;)if(c[d].children.length>this.Pa)this.hc(c,d),d--;else break;this.Yb(g,c,d)},hc:function(a,b){var c=a[b],d=c.children.length,e=this.rb;this.Zb(c,e,d);d=this.$b(c,e,d);d={children:c.children.splice(d,c.children.length-d),height:c.height,j:null,h:!1};c.h&&(d.h=!0);k(c,this.A);k(d,this.A);b?a[b-1].children.push(d):this.tb(c,d)},tb:function(a,b){this.data={children:[a,b],height:a.height+
1,j:null,h:!1};k(this.data,this.A)},$b:function(b,d,g){var c,e,f,k,l,n,p;l=n=Infinity;for(c=d;c<=g-d;c++)e=h(b,0,c,this.A),f=h(b,c,g,this.A),k=Math.max(0,Math.min(e[2],f[2])-Math.max(e[0],f[0]))*Math.max(0,Math.min(e[3],f[3])-Math.max(e[1],f[1])),e=a(e)+a(f),k<l?(l=k,p=c,n=e<n?e:n):k===l&&e<n&&(n=e,p=c);return p},Zb:function(a,b,g){var c=a.h?this.Va:f,e=a.h?this.Wa:d,h=this.kb(a,b,g,c);b=this.kb(a,b,g,e);h<b&&a.children.sort(c)},kb:function(a,d,f,k){a.children.sort(k);k=this.A;var c=h(a,0,d,k),e=
h(a,f-d,f,k),l=g(c)+g(e),n,p;for(n=d;n<f-d;n++)p=a.children[n],b(c,a.h?k(p):p.j),l+=g(c);for(n=f-d-1;n>=d;n--)p=a.children[n],b(e,a.h?k(p):p.j),l+=g(e);return l},Yb:function(a,d,g){for(;0<=g;g--)b(d[g].j,a)},bc:function(a){for(var b=a.length-1,c;0<=b;b--)0===a[b].children.length?0<b?(c=a[b-1].children,c.splice(c.indexOf(a[b]),1)):this.clear():k(a[b],this.A)},fc:function(a){var b=["return a"," - b",";"];this.Va=new Function("a","b",b.join(a[0]));this.Wa=new Function("a","b",b.join(a[1]));this.A=new Function("a",
"return [a"+a.join(", a")+"];")}};v.f=u},function(v,u,k){var h=function(){function b(a,b){for(var d=0;d<b.length;d++){var g=b[d];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}return function(a,d,f){d&&b(a.prototype,d);f&&b(a,f);return a}}(),b=k(7),f=k(4);u=function(){function d(a){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.na=[b.Cb(a,5)];this.ub={};this.J={};this.pa=0}h(d,[{key:"get",value:function(a,
b,d,h){var g=this,k=this.J[b],l=this.ub[b];k?k.push(d):l?d&&d():(k=this.J[b]=[d],this.pa++,this.ub[b]=l=f.createTexture(a,b,function(){k.forEach(function(a){return a&&a()});delete g.J[b];--g.pa||g.na.forEach(function(a){return a()})},h));return l}},{key:"onLoad",value:function(a){this.ic()?a():this.na.push(a)}},{key:"allLoaded",value:function(){return b.lc(this.J)}}]);return d}();v.f=u},function(v,u,k){var h=function(){function b(b,a){for(var d=0;d<a.length;d++){var f=a[d];f.enumerable=f.enumerable||
!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(d,a,g){a&&b(d.prototype,a);g&&b(d,g);return d}}(),b=k(7);k(4);u=function(){function f(d){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.na=[b.Cb(d||function(){},5)];this.ma={};this.J={};this.pa=0}h(f,[{key:"_transformFile",value:function(b,a){return"json"===a?JSON.parse(b):b}},{key:"get",value:function(b){return this.ma[b]}},{key:"load",value:function(d,a,g){var f=
this,h=this.J[d],k=this.ma[d];h?h.push(a):k?a&&a():(h=this.J[d]=[a],this.pa++,b.Lc(d,function(a){f.ma[d]=f.Kc(a,g);h.forEach(function(a){return a&&a(f.ma[d])});delete f.J[d];--f.pa||f.na.forEach(function(a){return a()})}));return k}},{key:"onLoad",value:function(b){this.ic()?b():this.na.push(b)}},{key:"allLoaded",value:function(){return b.lc(this.J)}}]);return f}();v.f=u},function(v,u,k){var h=function(){function b(b,a){for(var d=0;d<a.length;d++){var f=a[d];f.enumerable=f.enumerable||!1;f.configurable=
!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(d,a,g){a&&b(d.prototype,a);g&&b(d,g);return d}}(),b=k(12);u=function(){function f(d,a,g,h,k,u){var l=this;if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.Z=d;this.gc=a;this.dc=g;this.Qa=h;this.mb=u;this.ja=[];this.Ba=[];this.Ca=[];this.Da=[];this.qa={};this.la={};this.I={};h.forEach(function(a,b){l.qa[a.b]=b;l.I[a.b]={}});k.forEach(function(a,c){var d=b.u(a),g=b.B(a);l.I[d.b][g.b]=
a;l.la[a.b]=c});this.ia=[];this.ha=[]}h(f,[{key:"_doRemoveNodes",value:function(b){var a=this;b.forEach(function(b){if(void 0!==b.b){if(void 0!==a.qa[b.b])a.Z.ca.Dc(a.qa[b.b]),delete a.qa[b.b];else for(var d=0;d<a.ia.length;d++)if(a.ia[d]===b){a.ia.splice(d,1);break}b.Aa=b.b;delete b.b}})}},{key:"_doRemoveEdges",value:function(d){var a=this;d.forEach(function(d){if(void 0!==d.b){var g=b.u(d),f=b.B(d);delete (a.I[g.b]||{})[f.b];if(void 0!==a.la[d.b])a.Z.ca.Cc(a.la[d.b]),delete a.la[d.b];else for(g=
0;g<a.ha.length;g++)if(a.ha[g]===d){a.ha.splice(g,1);break}d.Aa=d.b;delete d.b}})}},{key:"_doAddEdges",value:function(){var b=this;this.ja.forEach(function(a){void 0!==b.la[a.b]&&b.Oa([a]);if(void 0!==a.b)console.error(a),console.error("This edge has been already added, if you want to add same edge twice, create new object with same properties");else{b.mb(a);var d=b.ha;0<=d.indexOf(a)||d.push(a)}})}},{key:"_doAddNodes",value:function(){var b=this;this.Ba.forEach(function(a){void 0!==b.qa[a.b]&&b.cc([a]);
if(void 0!==a.b)console.error(a),console.error("This node has been already added, if you want to add same node twice, create new object with same properties");else{b.mb(a);b.I[a.b]={};var d=b.ia;0<=d.indexOf(a)||d.push(a)}})}},{key:"addEdge",value:function(d){var a=b.u(d),f=b.B(d).b,a=a.b;(this.I[a]||{})[f]&&this.Oa([d]);if((this.I[f]||{})[a])return this.ja.push(this.I[f][a]),this.Oa([this.I[f][a]]),this.ja.push(this.I[a][f]=d),this;this.ja.push(d);return this}},{key:"addNode",value:function(b){this.Ba.push(b);
return this}},{key:"removeNode",value:function(b){this.Da.push(b);return this}},{key:"removeEdge",value:function(b){this.Ca.push(b);return this}},{key:"applyChanges",value:function(){if(0===this.Ca.length&&0===this.Da.length&&0===this.ja.length&&0===this.Ba.length)return this;this.ia=this.Z.w?this.Z.w.a:[];this.ha=this.Z.w?this.Z.w.i:[];this.Oa(this.Ca);this.cc(this.Da);this.Ic();this.Hc();this.ja=[];this.Ba=[];this.Ca=[];this.Da=[];this.gc();this.Z.w.set(this.ia,this.ha);this.dc();return this}}]);
return f}();v.f=u}]);"undefined"!==typeof module&&(module.f=ccNetViz);
